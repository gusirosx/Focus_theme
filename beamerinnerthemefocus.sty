% Copyright (C) 2018-2019 Pasquale Claudio Africa e a comunidade LaTeX.
%
% Esse tema é uma versão adaptada do tema Focus que visa disponibilizar um tema de 
% apresentações para o LaTeX Beamer com design limpo e minimalista.
% 
% Este arquivo faz parte do tema.
% 
% beamerthemefocus é um software livre: você pode redistribuí-lo e/ou modificá-lo
% nos termos da Licença Pública Geral GNU, publicada pela Free Software Foundation,
% versão 3 da Licença ou qualquer versão posterior.
% 
% beamerthemefocus é distribuído na esperança de que seja útil, mas SEM QUALQUER GARANTIA; 
% sem sequer a garantia implícita de COMERCIALIZAÇÃO ou ADEQUAÇÃO A UM OBJETIVO ESPECÍFICO. 
% Veja aLicença Pública Geral GNU para mais detalhes.
% 
% Você provavelmente recebeu uma cópia da Licença Pública Geral GNU junto com o tema focus. 
% Caso contrário, consulte <http://www.gnu.org/licenses/>.
%
% Modificado por Gustavo Silva Rodrigues
% Instruções completas disponíveis em: https://github.com/gusirosx/Focus_theme

\mode<presentation>

\RequirePackage{tikz}


% CUSTOMIZE STRUCTURE ELEMENTS. ------------------------------------------------
\setbeamertemplate{blocks}[default]

\setbeamertemplate{section in toc}[square]
\setbeamertemplate{subsection in toc}[square]

\setbeamertemplate{itemize items}[square]
\setbeamertemplate{itemize subitem}[triangle]


% STRUCTURE FRAME TEMPLATE DEFINITIONS. ----------------------------------------
% Title page.
\defbeamertemplate*{title page}{focus}{%
    {%
       	\usebeamercolor{frametitle}\colorlet{focus@@temp}{bg}%
	    \begin{tikzpicture}[overlay, remember picture]
	        \fill[color=focus@@temp] (current page.north west) rectangle ([shift = {(0, -0.45\paperheight)}] current page.north east);
	    \end{tikzpicture}
    }
    
    \vspace{-2.5\baselineskip}
    \begin{minipage}[b][0.35\paperheight]{\textwidth}
        \vspace{\baselineskip}
        \usebeamerfont{title}
        \usebeamercolor[fg]{frametitle}
        \inserttitle
    \end{minipage}
    
    \begin{minipage}[t][0.1\paperheight]{\textwidth}
        \usebeamerfont{subtitle}
        \usebeamercolor[fg]{frametitle}
        \insertsubtitle
    \end{minipage}
    
    % Set the title graphic in a zero-height box, so that
    % the position of other elements is not affected.
    \vspace*{0.4cm}
    \begin{minipage}[t]{\textwidth}
        \usebeamerfont{author}
        \insertauthor
    \end{minipage}
    \vspace*{1.2cm}

    \vbox to 0pt {
        \raggedleft
        \inserttitlegraphic
    }
    \vspace*{0.8cm}
    
    \vspace*{\baselineskip}
    \begin{minipage}[t]{\textwidth}
        \usebeamerfont{date}
        \insertdate
    \end{minipage}

   	\vspace*{0pt plus 100fill}
    
    \addtocounter{framenumber}{-1}
}

% Section page.
\defbeamertemplate*{section page}{focus}{%
    {%
        \usebeamercolor{frametitle}\colorlet{focus@@temp}{bg}%
        \begin{tikzpicture}[overlay, remember picture]
            \fill[color=focus@@temp] (current page.north west) rectangle ([shift = {(0, -0.45\paperheight)}] current page.north east);
        \end{tikzpicture}%
    }
    
    \vspace{-2.5\baselineskip}
    \begin{minipage}[b][0.45\paperheight]{\textwidth}
        \usebeamerfont{sectiontitle}
        \usebeamercolor[fg]{frametitle}
        \let\hyperlink\@secondoftwo\insertsection
    \end{minipage}

    \vspace{1.5\baselineskip}
    \begin{minipage}[t][0.55\paperheight]{\textwidth}
        \usebeamerfont{subsectiontitle}
        \usebeamercolor[bg]{frametitle}
        \insertsubsection
    \end{minipage}
}

% \AtBeginSection[]{%
%     \begin{frame}[plain, noframenumbering]{}
%         \sectionpage
%     \end{frame}%
% }

% Subsection page.
\defbeamertemplate*{subsection page}{focus}{%
    {%
        \usebeamercolor{frametitle}\colorlet{focus@@temp}{bg}%
        \begin{tikzpicture}[overlay, remember picture]
        \fill[color=focus@@temp] (current page.north west) rectangle ([shift = {(0, -0.45\paperheight)}] current page.north east);
        \end{tikzpicture}%
    }
    
    \vspace{-2.5\baselineskip}
    \begin{minipage}[b][0.45\paperheight]{\textwidth}
        \usebeamerfont{sectiontitle}
        \usebeamercolor[fg]{frametitle}
        \let\hyperlink\@secondoftwo\insertsection
    \end{minipage}
    
    \vspace{1.5\baselineskip}
    \begin{minipage}[t][0.55\paperheight]{\textwidth}
        \usebeamerfont{subsectiontitle}
        \usebeamercolor[bg]{frametitle}
        \insertsubsection
    \end{minipage}
}

% \AtBeginSubsection[]{%
%     \begin{frame}[plain, noframenumbering]{}
%         \subsectionpage
%     \end{frame}%
% }

\mode<all>
